(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[167],{53439:function(e,t,i){let n=i(67294),r=n.forwardRef(function({title:e,titleId:t,...i},r){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},i),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"}))});e.exports=r},26797:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/entangle",function(){return i(34129)}])},34129:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return D}});var n=i(85893),r=i(79286),a=i(58467),o=i(62397),l=i(49836),s=i(49593);new l.PublicKey("ABseVbbB9Dd2NaonudphxWJWc3Hq12C7PjGQ89HRkPaB");let d=new l.PublicKey("ABseVbbB9Dd2NaonudphxWJWc3Hq12C7PjGQ89HRkPaB");var c=i(48764).Buffer;let g=s.struct([s.publicKey("id"),s.u16("royalties"),s.bool("oneWay")]);var u=i(48764).Buffer,f=i(48764).Buffer,y=i(48764).Buffer,b=i(95827),m=i(48764).Buffer;class h{static async fetch(e,t){let i=await e.getAccountInfo(t);if(null===i)return null;if(!i.owner.equals(d))throw Error("account doesn't belong to this program");return this.decode(i.data)}static async fetchMultiple(e,t){let i=await e.getMultipleAccountsInfo(t);return i.map(e=>{if(null===e)return null;if(!e.owner.equals(d))throw Error("account doesn't belong to this program");return this.decode(e.data)})}static decode(e){if(!e.slice(0,8).equals(h.discriminator))throw Error("invalid account discriminator");let t=h.layout.decode(e.slice(8));return new h({id:t.id,originalCollectionMint:t.originalCollectionMint,entangledCollectionMint:t.entangledCollectionMint,royalties:t.royalties,oneWay:t.oneWay})}toJSON(){return{id:this.id.toString(),originalCollectionMint:this.originalCollectionMint.toString(),entangledCollectionMint:this.entangledCollectionMint.toString(),royalties:this.royalties,oneWay:this.oneWay}}static fromJSON(e){return new h({id:new l.PublicKey(e.id),originalCollectionMint:new l.PublicKey(e.originalCollectionMint),entangledCollectionMint:new l.PublicKey(e.entangledCollectionMint),royalties:e.royalties,oneWay:e.oneWay})}constructor(e){this.id=e.id,this.originalCollectionMint=e.originalCollectionMint,this.entangledCollectionMint=e.entangledCollectionMint,this.royalties=e.royalties,this.oneWay=e.oneWay}}h.discriminator=m.from([185,244,55,234,11,82,36,28]),h.layout=s.struct([s.publicKey("id"),s.publicKey("originalCollectionMint"),s.publicKey("entangledCollectionMint"),s.u16("royalties"),s.bool("oneWay")]);var P=i(48764).Buffer;class p{static async fetch(e,t){let i=await e.getAccountInfo(t);if(null===i)return null;if(!i.owner.equals(d))throw Error("account doesn't belong to this program");return this.decode(i.data)}static async fetchMultiple(e,t){let i=await e.getMultipleAccountsInfo(t);return i.map(e=>{if(null===e)return null;if(!e.owner.equals(d))throw Error("account doesn't belong to this program");return this.decode(e.data)})}static decode(e){if(!e.slice(0,8).equals(p.discriminator))throw Error("invalid account discriminator");let t=p.layout.decode(e.slice(8));return new p({originalMint:t.originalMint,entangledMint:t.entangledMint})}toJSON(){return{originalMint:this.originalMint.toString(),entangledMint:this.entangledMint.toString()}}static fromJSON(e){return new p({originalMint:new l.PublicKey(e.originalMint),entangledMint:new l.PublicKey(e.entangledMint)})}constructor(e){this.originalMint=e.originalMint,this.entangledMint=e.entangledMint}}p.discriminator=P.from([133,118,20,210,1,54,172,116]),p.layout=s.struct([s.publicKey("originalMint"),s.publicKey("entangledMint")]);var M=i(48764).Buffer;let S="entanglement-pair",k="entanglement-mint";class A{constructor(e,t,i,n,r){this.instruction={createCollection:e=>{let[t]=l.PublicKey.findProgramAddressSync([this.entanglerAuthority.toBuffer(),a.H_.toBuffer(),this.entangledCollectionMint.toBuffer()],a._u);return function(e,t){let i=[{pubkey:t.signer,isSigner:!0,isWritable:!0},{pubkey:t.creator,isSigner:!1,isWritable:!1},{pubkey:t.entanglerAuthority,isSigner:!1,isWritable:!0},{pubkey:t.entangledCollection,isSigner:!1,isWritable:!0},{pubkey:t.masterEdition,isSigner:!1,isWritable:!0},{pubkey:t.originalCollectionMint,isSigner:!1,isWritable:!1},{pubkey:t.originalCollectionMetadata,isSigner:!1,isWritable:!1},{pubkey:t.entangledCollectionMint,isSigner:!1,isWritable:!0},{pubkey:t.entangledCollectionMetadata,isSigner:!1,isWritable:!0},{pubkey:t.entangledCollectionMintAccount,isSigner:!1,isWritable:!0},{pubkey:t.metadataProgram,isSigner:!1,isWritable:!1},{pubkey:t.tokenProgram,isSigner:!1,isWritable:!1},{pubkey:t.associatedTokenProgram,isSigner:!1,isWritable:!1},{pubkey:t.systemProgram,isSigner:!1,isWritable:!1},{pubkey:t.rent,isSigner:!1,isWritable:!1}],n=c.from([156,251,92,54,233,2,16,82]),r=c.alloc(1e3),a=g.encode({id:e.id,royalties:e.royalties,oneWay:e.oneWay},r),o=c.concat([n,r]).slice(0,8+a),s=new l.TransactionInstruction({keys:i,programId:d,data:o});return s}({id:this.id,royalties:this.royalties,oneWay:e},{signer:this.signer,creator:this.creator,entanglerAuthority:this.entanglerAuthority,entangledCollection:this.entangledCollection,entangledCollectionMint:this.entangledCollectionMint,masterEdition:this.entangledCollectionMasterEdition,entangledCollectionMetadata:this.entangledCollectionMetadata,originalCollectionMint:this.originalCollectionMint,originalCollectionMetadata:this.originalCollectionMetadata,entangledCollectionMintAccount:t,metadataProgram:b.PROGRAM_ID,tokenProgram:a.H_,associatedTokenProgram:a._u,rent:l.SYSVAR_RENT_PUBKEY,systemProgram:l.SystemProgram.programId})},initializePair:e=>{let t=l.PublicKey.findProgramAddressSync([M.from("metadata"),b.PROGRAM_ID.toBuffer(),e.toBuffer()],b.PROGRAM_ID)[0],i=(0,o.MO)(e,this.entanglerAuthority,!0),[n]=l.PublicKey.findProgramAddressSync([M.from(k),this.id.toBuffer(),e.toBuffer()],d),[r]=l.PublicKey.findProgramAddressSync([M.from(S),n.toBuffer()],d),s=l.PublicKey.findProgramAddressSync([M.from("metadata"),b.PROGRAM_ID.toBuffer(),n.toBuffer()],b.PROGRAM_ID)[0],c=(0,o.MO)(n,this.entanglerAuthority,!0);return function(e){let t=[{pubkey:e.signer,isSigner:!0,isWritable:!0},{pubkey:e.creator,isSigner:!1,isWritable:!1},{pubkey:e.entanglerAuthority,isSigner:!1,isWritable:!0},{pubkey:e.masterEdition,isSigner:!1,isWritable:!0},{pubkey:e.entangledCollection,isSigner:!1,isWritable:!1},{pubkey:e.entangledCollectionMint,isSigner:!1,isWritable:!0},{pubkey:e.entangledCollectionMetadata,isSigner:!1,isWritable:!1},{pubkey:e.entangledPair,isSigner:!1,isWritable:!0},{pubkey:e.originalMint,isSigner:!1,isWritable:!0},{pubkey:e.originalMetadata,isSigner:!1,isWritable:!1},{pubkey:e.originalMintEscrow,isSigner:!1,isWritable:!0},{pubkey:e.entangledMint,isSigner:!1,isWritable:!0},{pubkey:e.entangledMetadata,isSigner:!1,isWritable:!0},{pubkey:e.entangledMintEscrow,isSigner:!1,isWritable:!0},{pubkey:e.metadataProgram,isSigner:!1,isWritable:!1},{pubkey:e.tokenProgram,isSigner:!1,isWritable:!1},{pubkey:e.associatedTokenProgram,isSigner:!1,isWritable:!1},{pubkey:e.systemProgram,isSigner:!1,isWritable:!1},{pubkey:e.rent,isSigner:!1,isWritable:!1}],i=u.from([177,114,226,34,186,150,5,245]),n=new l.TransactionInstruction({keys:t,programId:d,data:i});return n}({signer:this.signer,creator:this.creator,entanglerAuthority:this.entanglerAuthority,entangledCollection:this.entangledCollection,entangledCollectionMint:this.entangledCollectionMint,masterEdition:this.entangledCollectionMasterEdition,entangledCollectionMetadata:this.entangledCollectionMetadata,originalMint:e,originalMetadata:t,originalMintEscrow:i,entangledPair:r,entangledMint:n,entangledMetadata:s,entangledMintEscrow:c,metadataProgram:b.PROGRAM_ID,tokenProgram:a.H_,associatedTokenProgram:a._u,rent:l.SYSVAR_RENT_PUBKEY,systemProgram:l.SystemProgram.programId})},entangle:e=>{let t=l.PublicKey.findProgramAddressSync([M.from("metadata"),b.PROGRAM_ID.toBuffer(),e.toBuffer()],b.PROGRAM_ID)[0],i=l.PublicKey.findProgramAddressSync([this.entanglerAuthority.toBuffer(),a.H_.toBuffer(),e.toBuffer()],a._u)[0],[n]=l.PublicKey.findProgramAddressSync([M.from(k),this.id.toBuffer(),e.toBuffer()],d),r=l.PublicKey.findProgramAddressSync([M.from("metadata"),b.PROGRAM_ID.toBuffer(),n.toBuffer()],b.PROGRAM_ID)[0],o=l.PublicKey.findProgramAddressSync([this.entanglerAuthority.toBuffer(),a.H_.toBuffer(),n.toBuffer()],a._u)[0],s=l.PublicKey.findProgramAddressSync([this.signer.toBuffer(),a.H_.toBuffer(),e.toBuffer()],a._u)[0],c=l.PublicKey.findProgramAddressSync([this.signer.toBuffer(),a.H_.toBuffer(),n.toBuffer()],a._u)[0];return console.log(Object.entries({signer:this.signer,entanglerAuthority:this.entanglerAuthority,entangledCollection:this.entangledCollection,entangledCollectionMint:this.entangledCollectionMint,entangledCollectionMetadata:this.entangledCollectionMetadata,originalMint:e,originalMetadata:t,originalMintAccount:s,originalMintEscrow:i,entangledMint:n,entangledMetadata:r,entangledMintAccount:c,entangledMintEscrow:o,metadataProgram:b.PROGRAM_ID,tokenProgram:a.H_,associatedTokenProgram:a._u,rent:l.SYSVAR_RENT_PUBKEY,systemProgram:l.SystemProgram.programId}).map(e=>{let[t,i]=e;return[t,i.toString()]})),function(e){let t=[{pubkey:e.signer,isSigner:!0,isWritable:!0},{pubkey:e.entanglerAuthority,isSigner:!1,isWritable:!1},{pubkey:e.entangledCollection,isSigner:!1,isWritable:!1},{pubkey:e.entangledCollectionMint,isSigner:!1,isWritable:!1},{pubkey:e.entangledCollectionMetadata,isSigner:!1,isWritable:!1},{pubkey:e.originalMint,isSigner:!1,isWritable:!0},{pubkey:e.originalMetadata,isSigner:!1,isWritable:!1},{pubkey:e.originalMintAccount,isSigner:!1,isWritable:!0},{pubkey:e.originalMintEscrow,isSigner:!1,isWritable:!0},{pubkey:e.entangledMint,isSigner:!1,isWritable:!1},{pubkey:e.entangledMintAccount,isSigner:!1,isWritable:!0},{pubkey:e.entangledMetadata,isSigner:!1,isWritable:!0},{pubkey:e.entangledMintEscrow,isSigner:!1,isWritable:!0},{pubkey:e.metadataProgram,isSigner:!1,isWritable:!1},{pubkey:e.tokenProgram,isSigner:!1,isWritable:!1},{pubkey:e.associatedTokenProgram,isSigner:!1,isWritable:!1},{pubkey:e.systemProgram,isSigner:!1,isWritable:!1},{pubkey:e.rent,isSigner:!1,isWritable:!1}],i=f.from([237,132,7,235,155,246,220,76]),n=new l.TransactionInstruction({keys:t,programId:d,data:i});return n}({signer:this.signer,entanglerAuthority:this.entanglerAuthority,entangledCollection:this.entangledCollection,entangledCollectionMint:this.entangledCollectionMint,entangledCollectionMetadata:this.entangledCollectionMetadata,originalMint:e,originalMetadata:t,originalMintAccount:s,originalMintEscrow:i,entangledMint:n,entangledMetadata:r,entangledMintAccount:c,entangledMintEscrow:o,metadataProgram:b.PROGRAM_ID,tokenProgram:a.H_,associatedTokenProgram:a._u,rent:l.SYSVAR_RENT_PUBKEY,systemProgram:l.SystemProgram.programId})},disentangle:e=>{let t=l.PublicKey.findProgramAddressSync([M.from("metadata"),b.PROGRAM_ID.toBuffer(),e.toBuffer()],b.PROGRAM_ID)[0],i=l.PublicKey.findProgramAddressSync([this.entanglerAuthority.toBuffer(),a.H_.toBuffer(),e.toBuffer()],a._u)[0],[n]=l.PublicKey.findProgramAddressSync([M.from(k),this.id.toBuffer(),e.toBuffer()],d),r=l.PublicKey.findProgramAddressSync([M.from("metadata"),b.PROGRAM_ID.toBuffer(),n.toBuffer()],b.PROGRAM_ID)[0],o=l.PublicKey.findProgramAddressSync([this.entanglerAuthority.toBuffer(),a.H_.toBuffer(),n.toBuffer()],a._u)[0],s=l.PublicKey.findProgramAddressSync([this.signer.toBuffer(),a.H_.toBuffer(),e.toBuffer()],a._u)[0],c=l.PublicKey.findProgramAddressSync([this.signer.toBuffer(),a.H_.toBuffer(),n.toBuffer()],a._u)[0];return function(e){let t=[{pubkey:e.signer,isSigner:!0,isWritable:!0},{pubkey:e.entanglerAuthority,isSigner:!1,isWritable:!1},{pubkey:e.entangledCollection,isSigner:!1,isWritable:!1},{pubkey:e.entangledCollectionMint,isSigner:!1,isWritable:!1},{pubkey:e.entangledCollectionMetadata,isSigner:!1,isWritable:!1},{pubkey:e.originalMint,isSigner:!1,isWritable:!0},{pubkey:e.originalMetadata,isSigner:!1,isWritable:!1},{pubkey:e.originalMintAccount,isSigner:!1,isWritable:!0},{pubkey:e.originalMintEscrow,isSigner:!1,isWritable:!0},{pubkey:e.entangledMint,isSigner:!1,isWritable:!1},{pubkey:e.entangledMintAccount,isSigner:!1,isWritable:!0},{pubkey:e.entangledMetadata,isSigner:!1,isWritable:!0},{pubkey:e.entangledMintEscrow,isSigner:!1,isWritable:!0},{pubkey:e.metadataProgram,isSigner:!1,isWritable:!1},{pubkey:e.tokenProgram,isSigner:!1,isWritable:!1},{pubkey:e.associatedTokenProgram,isSigner:!1,isWritable:!1},{pubkey:e.systemProgram,isSigner:!1,isWritable:!1},{pubkey:e.rent,isSigner:!1,isWritable:!1}],i=y.from([11,10,198,218,194,86,43,93]),n=new l.TransactionInstruction({keys:t,programId:d,data:i});return n}({signer:this.signer,entanglerAuthority:this.entanglerAuthority,entangledCollection:this.entangledCollection,entangledCollectionMint:this.entangledCollectionMint,entangledCollectionMetadata:this.entangledCollectionMetadata,originalMint:e,originalMetadata:t,originalMintAccount:s,originalMintEscrow:i,entangledMint:n,entangledMetadata:r,entangledMintAccount:c,entangledMintEscrow:o,metadataProgram:b.PROGRAM_ID,tokenProgram:a.H_,associatedTokenProgram:a._u,rent:l.SYSVAR_RENT_PUBKEY,systemProgram:l.SystemProgram.programId})}},this.signer=t,this.id=i,this.creator=n,this.royalties=r,this.entanglerAuthority=l.PublicKey.findProgramAddressSync([M.from("authority")],d)[0],this.entangledCollection=l.PublicKey.findProgramAddressSync([M.from("collection"),i.toBuffer()],d)[0],this.entangledCollectionMint=l.PublicKey.findProgramAddressSync([M.from("collection-mint"),i.toBuffer()],d)[0],this.entangledCollectionMasterEdition=l.PublicKey.findProgramAddressSync([M.from("metadata"),b.PROGRAM_ID.toBuffer(),this.entangledCollectionMint.toBuffer(),M.from("edition")],b.PROGRAM_ID)[0],this.entangledCollectionMetadata=l.PublicKey.findProgramAddressSync([M.from("metadata"),b.PROGRAM_ID.toBuffer(),this.entangledCollectionMint.toBuffer()],b.PROGRAM_ID)[0],this.entangledCollectionMintAccount=l.PublicKey.findProgramAddressSync([this.entanglerAuthority.toBuffer(),a.H_.toBuffer(),this.entangledCollectionMint.toBuffer()],a._u)[0],this.originalCollectionMint=e,this.originalCollectionMetadata=l.PublicKey.findProgramAddressSync([M.from("metadata"),b.PROGRAM_ID.toBuffer(),e.toBuffer()],b.PROGRAM_ID)[0],this.originalMintEscrow=l.PublicKey.findProgramAddressSync([this.entanglerAuthority.toBuffer(),a.H_.toBuffer(),e.toBuffer()],a._u)[0]}}var C=i(44718),W=i(54306),B=i(89583),_=i(53439),w=i.n(_),x=i(67294),R=i(22920),K=i(35674),E=i(48764).Buffer;let I=e=>{let{disentangle:t}=e,{connection:i}=(0,C.R)(),{tokens:a,entangledTokens:s,fetchTokens:c}=(0,x.useContext)(K.y),g=t?s:a,u=(0,W.O)(),[f,y]=(0,x.useState)(!1),[b,m]=(0,x.useState)([]),h=async()=>{if(u&&0!=b.length&&i){y(!0);try{let e=[];for(let n of b){let a=new l.Transaction(await i.getLatestBlockhash()),s=new A(n.address,u.publicKey,r.Yy,r.bR,500),[g]=l.PublicKey.findProgramAddressSync([E.from("entanglement-mint"),r.Yy.toBuffer(),n.address.toBuffer()],d);if(t){let[f]=l.PublicKey.findProgramAddressSync([E.from(S),n.address.toBuffer()],d),h=await p.fetch(i,f);a.add(s.instruction.disentangle(null==h?void 0:h.originalMint))}else{try{await (0,o.ih)(i,g)}catch(P){a.add(s.instruction.initializePair(n.address))}a.add(s.instruction.entangle(n.address))}a.feePayer=u.publicKey,e.push(a)}let M=await u.signAllTransactions(e);await Promise.all(M.map(async e=>await i.confirmTransaction(await i.sendRawTransaction(e.serialize(),{skipPreflight:!0})))),c(),m([])}catch(k){console.log(k),(0,R.Am)("Entanglement failed: ".concat(k))}finally{y(!1)}}};return console.log("OG Dippies",a),console.log("Entangled Dippies",s),console.log("Selected Dippies",b),(0,n.jsxs)("div",{className:"rounded-xl bg-base-200 m-5 shadow-xl border-2",children:[b.length>0?(0,n.jsxs)("div",{className:"flex flex-col gap-3 bg-base-200 max-w-xl mx-auto rounded-lg p-5 justify-center",children:[(0,n.jsxs)("h4",{className:"text-3xl text-center",children:[t?"Disentangle":"Entangle"," ",b.length," ","Dippies"]}),(0,n.jsx)("div",{className:"w-32 sm:w-48 mx-auto",children:(0,n.jsx)("div",{className:"stack",children:b.map((e,t)=>{var i;return(0,n.jsx)("img",{className:"w-32 sm:w-48 rounded-md",src:null===(i=e.json)||void 0===i?void 0:i.image})})})}),(0,n.jsxs)("div",{className:"btn btn-lg btn-primary flex flex-row gap-5 ".concat(0!==b.length?"":"btn-disabled"," ").concat(f?"loading btn-disabled":""),onClick:h,children:[t?"Disentangle":"Entangle",(0,n.jsx)("span",{className:"text-xl",children:b.length}),(0,n.jsx)(w(),{className:"w-8 h-8"})]})]}):null,g&&g.length>0?(0,n.jsxs)("div",{className:"flex flex-col p-5",children:[(0,n.jsxs)("span",{className:"text-center text-3xl",children:["Select Dippies to ",t?"disentangle":"entangle"]}),(0,n.jsx)("div",{className:"flex flex-wrap justify-center",children:g.map(e=>{var t;return(0,n.jsxs)("div",{className:"m-3 static flex flex-col w-32 sm:w-48 rounded-lg shadow-xl border-2 ".concat(b.includes(e)?"border-accent":""),onClick:()=>b.includes(e)?m(t=>t.filter(t=>!t.address.equals(e.address))):m(t=>[...t,e]),children:[b.includes(e)?(0,n.jsx)("div",{className:"absolute p-1",children:(0,n.jsx)(B.FJM,{className:"text-accent w-8 h-8"})}):null,(0,n.jsx)("img",{className:"w-56 rounded-t-md",src:null===(t=e.json)||void 0===t?void 0:t.image}),(0,n.jsx)("span",{className:"text-xl font-bold text-center p-3",children:e.name})]},e.address.toString())})})]}):(0,n.jsxs)("span",{className:"text-center text-3xl p-5",children:["No Dippies to ",t?"disentangle":"entangle"]})]})};var N=i(9008),j=i.n(N);let O=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(j(),{children:[(0,n.jsx)("title",{children:"Dippies Club - Entangle"}),(0,n.jsx)("meta",{name:"description",content:"A path forward"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsxs)("div",{className:"mt-24",children:[(0,n.jsx)(I,{}),(0,n.jsx)(I,{disentangle:!0})]})]});var D=O},9008:function(e,t,i){e.exports=i(83121)}},function(e){e.O(0,[445,774,888,179],function(){return e(e.s=26797)}),_N_E=e.O()}]);